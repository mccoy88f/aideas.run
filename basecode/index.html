<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIdeas - Run your AI-Ideas</title>
    
    <!-- Material UI CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <!-- JSZip -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- Local CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="material-icons">psychology</span>
                <div>
                    <div style="font-size: 1.25rem; font-weight: 700;">AIdeas</div>
                    <div style="font-size: 0.75rem; opacity: 0.8; margin-top: -2px;">Run your AI-Ideas</div>
                </div>
            </div>
            <div class="stats">
                <div class="chip">
                    <span class="material-icons" style="font-size: 16px;">psychology</span>
                    <span id="appCount">0</span> AI-Ideas
                </div>
                <div class="chip">
                    <span class="material-icons" style="font-size: 16px;">storage</span>
                    <span id="storageUsed">0</span> MB
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Upload Section -->
        <div class="card glass">
            <div class="card-content">
                <h2 class="card-title">
                    <span class="material-icons">cloud_upload</span>
                    Deploy Your AI-Idea
                </h2>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üöÄ</div>
                    <div class="upload-text">Carica il tuo progetto AI in formato ZIP</div>
                    <div class="upload-subtext">oppure trascina e rilascia qui</div>
                </div>
                
                <input type="file" id="fileInput" accept=".zip" style="display: none;" />
                
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div style="text-align: center; margin-top: 8px; font-size: 0.875rem;">
                        <span id="progressText">0%</span>
                    </div>
                </div>
                
                <div id="uploadStatus"></div>
            </div>
        </div>

        <!-- Apps Management -->
        <div class="card glass">
            <div class="card-content">
                <h2 class="card-title">
                    <span class="material-icons">psychology</span>
                    Your AI-Ideas
                </h2>
                
                <!-- Controls -->
                <div class="controls">
                    <div class="search-field">
                        <input type="text" class="input-field" id="searchBox" placeholder="üîç Cerca tra le tue AI-Ideas..." />
                    </div>
                    
                    <select class="select-field" id="categoryFilter">
                        <option value="">Tutte le Categorie</option>
                        <option value="ai">ü§ñ AI/Machine Learning</option>
                        <option value="data">üìä Data Science</option>
                        <option value="web">üåê Web Apps</option>
                        <option value="tools">üõ†Ô∏è Tools</option>
                        <option value="games">üéÆ Games</option>
                        <option value="other">üì± Altro</option>
                    </select>
                    
                    <select class="select-field" id="sortSelect">
                        <option value="name">Ordina per Nome</option>
                        <option value="date">Ordina per Data</option>
                        <option value="size">Ordina per Dimensione</option>
                        <option value="category">Ordina per Categoria</option>
                    </select>
                    
                    <button class="btn btn-warning" onclick="exportApps()" id="exportBtn" disabled>
                        <span class="material-icons" style="font-size: 16px;">file_download</span>
                        Export Completo
                    </button>
                    <button class="btn btn-success" onclick="openImportModal()" id="importBtn">
                        <span class="material-icons" style="font-size: 16px;">file_upload</span>
                        Import
                    </button>
                    <button class="btn btn-error" onclick="clearAllApps()" id="clearBtn" disabled>
                        <span class="material-icons" style="font-size: 16px;">delete_sweep</span>
                        Elimina Tutto
                    </button>
                </div>

                <!-- Apps Container -->
                <div id="appsContainer">
                    <div class="empty-state">
                        <div class="empty-icon">ü§ñ</div>
                        <h3>Nessuna AI-Idea deployed</h3>
                        <p>Carica il tuo primo progetto AI per iniziare!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="material-icons">file_upload</span>
                    Import AI-Ideas
                </div>
                <button class="icon-btn" onclick="closeImportModal()">
                    <span class="material-icons">close</span>
                </button>
            </div>
            
            <div style="padding: 24px;">
                <div style="margin-bottom: 24px;">
                    <h4 style="margin-bottom: 16px; color: #ffd700;">Seleziona tipo di import:</h4>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button class="btn btn-outlined import-type-btn active" data-type="zip">
                            <span class="material-icons" style="font-size: 16px;">archive</span>
                            App ZIP
                        </button>
                        <button class="btn btn-outlined import-type-btn" data-type="backup">
                            <span class="material-icons" style="font-size: 16px;">backup</span>
                            Backup File
                        </button>
                        <button class="btn btn-outlined import-type-btn" data-type="url">
                            <span class="material-icons" style="font-size: 16px;">link</span>
                            Da URL
                        </button>
                    </div>
                </div>
                
                <!-- ZIP Import -->
                <div id="zipImport" class="import-section">
                    <h5 style="margin-bottom: 12px;">Carica App ZIP</h5>
                    <div class="upload-area" style="padding: 32px; margin-bottom: 16px;" onclick="document.getElementById('importZipInput').click()">
                        <div style="font-size: 2em; margin-bottom: 8px;">üì¶</div>
                        <div>Clicca per selezionare un file ZIP</div>
                        <div style="font-size: 0.8em; opacity: 0.7; margin-top: 4px;">
                            O trascina e rilascia qui
                        </div>
                    </div>
                    <input type="file" id="importZipInput" accept=".zip" style="display: none;" />
                </div>
                
                <!-- Backup Import -->
                <div id="backupImport" class="import-section hidden">
                    <h5 style="margin-bottom: 12px;">Ripristina da Backup</h5>
                    <div class="upload-area" style="padding: 32px; margin-bottom: 16px;" onclick="document.getElementById('importBackupInput').click()">
                        <div style="font-size: 2em; margin-bottom: 8px;">üíæ</div>
                        <div>Carica file di backup (.json)</div>
                        <div style="font-size: 0.8em; opacity: 0.7; margin-top: 4px;">
                            Ripristina tutte le AI-Ideas salvate
                        </div>
                    </div>
                    <input type="file" id="importBackupInput" accept=".json" style="display: none;" />
                    <div style="background: rgba(255, 193, 7, 0.2); border: 1px solid rgba(255, 193, 7, 0.5); padding: 12px; border-radius: 8px; font-size: 0.85em;">
                        ‚ö†Ô∏è <strong>Attenzione:</strong> Questo sostituir√† tutte le AI-Ideas esistenti
                    </div>
                </div>
                
                <!-- URL Import -->
                <div id="urlImport" class="import-section hidden">
                    <h5 style="margin-bottom: 12px;">Import da URL</h5>
                    <div style="margin-bottom: 16px;">
                        <input type="url" class="input-field" id="importUrlInput" placeholder="https://example.com/app.zip" style="margin-bottom: 8px;" />
                        <div style="font-size: 0.85em; opacity: 0.7;">
                            Inserisci l'URL di un file ZIP contenente un'app
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="importFromUrl()" style="width: 100%;">
                        <span class="material-icons" style="font-size: 16px;">download</span>
                        Scarica e Importa
                    </button>
                </div>
            </div>
            
            <div style="display: flex; gap: 12px; justify-content: flex-end; padding: 0 24px 24px;">
                <button class="btn btn-outlined" onclick="closeImportModal()">Annulla</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="material-icons">edit</span>
                    Modifica AI-Idea
                </div>
                <button class="icon-btn" onclick="closeEditModal()">
                    <span class="material-icons">close</span>
                </button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Nome AI-Idea:</label>
                <input type="text" class="input-field" id="editName" placeholder="Nome progetto..." />
            </div>
            
            <div class="form-group">
                <label class="form-label">Descrizione:</label>
                <input type="text" class="input-field" id="editDescription" placeholder="Descrizione progetto..." />
            </div>

            <div class="form-group">
                <label class="form-label">Categoria:</label>
                <select class="input-field" id="editCategory">
                    <option value="ai">ü§ñ AI/Machine Learning</option>
                    <option value="data">üìä Data Science</option>
                    <option value="web">üåê Web Apps</option>
                    <option value="tools">üõ†Ô∏è Tools</option>
                    <option value="games">üéÆ Games</option>
                    <option value="other">üì± Altro</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Tags (separati da virgola):</label>
                <input type="text" class="input-field" id="editTags" placeholder="machine learning, python, tensorflow..." />
            </div>
            
            <div style="display: flex; gap: 12px; justify-content: flex-end;">
                <button class="btn btn-outlined" onclick="closeEditModal()">Annulla</button>
                <button class="btn btn-success" onclick="saveAppEdit()">Salva</button>
            </div>
        </div>
    </div>

    <!-- Local JavaScript -->
    <script src="script.js"></script>
</body>
</html>