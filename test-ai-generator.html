<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Generatore AI - AIdeas</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }
        .test-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }
        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
        }
        .status.success {
            background: rgba(72, 187, 120, 0.2);
            border: 1px solid #48bb78;
        }
        .status.error {
            background: rgba(245, 101, 101, 0.2);
            border: 1px solid #f56565;
        }
        .status.info {
            background: rgba(66, 153, 225, 0.2);
            border: 1px solid #4299e1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Test Generatore AI - AIdeas</h1>
        
        <div class="test-section">
            <h3>1. Test Apertura Modale</h3>
            <p>Verifica che il modale del generatore AI si apra correttamente</p>
            <button class="test-button" onclick="testOpenModal()">
                Apri Generatore AI
            </button>
            <div id="modal-status" class="status info" style="display: none;">
                Test in corso...
            </div>
        </div>

        <div class="test-section">
            <h3>2. Test Autenticazione Puter</h3>
            <p>Verifica che Puter.js si carichi e l'autenticazione funzioni</p>
            <button class="test-button" onclick="testPuterAuth()">
                Test Autenticazione
            </button>
            <div id="auth-status" class="status info" style="display: none;">
                Test in corso...
            </div>
        </div>

        <div class="test-section">
            <h3>3. Test Generazione App</h3>
            <p>Verifica che la generazione di un'app di test funzioni</p>
            <button class="test-button" onclick="testAppGeneration()">
                Genera App di Test
            </button>
            <div id="generation-status" class="status info" style="display: none;">
                Test in corso...
            </div>
        </div>

        <div class="test-section">
            <h3>4. Test Integrazione AIdeas</h3>
            <p>Verifica che l'importazione in AIdeas funzioni</p>
            <button class="test-button" onclick="testAideasIntegration()">
                Test Importazione
            </button>
            <div id="integration-status" class="status info" style="display: none;">
                Test in corso...
            </div>
        </div>

        <div class="test-section">
            <h3>5. Risultati Test</h3>
            <div id="test-results">
                <p>Esegui i test sopra per vedere i risultati</p>
            </div>
        </div>
    </div>

    <script>
        let testResults = [];

        function updateStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
            element.style.display = 'block';
        }

        function addTestResult(testName, success, message) {
            testResults.push({ testName, success, message });
            updateTestResults();
        }

        function updateTestResults() {
            const resultsDiv = document.getElementById('test-results');
            const passed = testResults.filter(r => r.success).length;
            const total = testResults.length;
            
            let html = `<h4>Risultati: ${passed}/${total} test superati</h4>`;
            
            testResults.forEach(result => {
                const icon = result.success ? '‚úÖ' : '‚ùå';
                const color = result.success ? 'success' : 'error';
                html += `<div class="status ${color}">${icon} ${result.testName}: ${result.message}</div>`;
            });
            
            resultsDiv.innerHTML = html;
        }

        function testOpenModal() {
            updateStatus('modal-status', 'Test apertura modale...', 'info');
            
            try {
                // Simula l'apertura del modale
                if (window.parent && window.parent.setAiGeneratorOpen) {
                    window.parent.setAiGeneratorOpen(true);
                    updateStatus('modal-status', 'Modale aperto con successo!', 'success');
                    addTestResult('Apertura Modale', true, 'Modale aperto correttamente');
                } else {
                    updateStatus('modal-status', 'Funzione non disponibile (test standalone)', 'info');
                    addTestResult('Apertura Modale', true, 'Test eseguito in modalit√† standalone');
                }
            } catch (error) {
                updateStatus('modal-status', `Errore: ${error.message}`, 'error');
                addTestResult('Apertura Modale', false, error.message);
            }
        }

        function testPuterAuth() {
            updateStatus('auth-status', 'Test autenticazione Puter...', 'info');
            
            try {
                // Verifica se Puter.js √® disponibile
                if (typeof puter !== 'undefined') {
                    updateStatus('auth-status', 'Puter.js caricato correttamente!', 'success');
                    addTestResult('Autenticazione Puter', true, 'Puter.js disponibile');
                } else {
                    updateStatus('auth-status', 'Puter.js non ancora caricato', 'info');
                    addTestResult('Autenticazione Puter', true, 'Puter.js verr√† caricato al primo utilizzo');
                }
            } catch (error) {
                updateStatus('auth-status', `Errore: ${error.message}`, 'error');
                addTestResult('Autenticazione Puter', false, error.message);
            }
        }

        function testAppGeneration() {
            updateStatus('generation-status', 'Test generazione app...', 'info');
            
            try {
                // Simula una generazione di test
                const testApp = {
                    name: 'App di Test',
                    description: 'App generata per test',
                    icon: 'üß™',
                    code: '<html><body><h1>App di Test</h1><p>Generata correttamente!</p></body></html>',
                    model: 'test-model',
                    createdAt: new Date().toISOString()
                };
                
                updateStatus('generation-status', 'App di test generata!', 'success');
                addTestResult('Generazione App', true, 'App di test creata correttamente');
                
                // Salva in localStorage per test
                localStorage.setItem('test-ai-app', JSON.stringify(testApp));
                
            } catch (error) {
                updateStatus('generation-status', `Errore: ${error.message}`, 'error');
                addTestResult('Generazione App', false, error.message);
            }
        }

        function testAideasIntegration() {
            updateStatus('integration-status', 'Test integrazione AIdeas...', 'info');
            
            try {
                // Verifica se l'app di test √® stata salvata
                const testApp = localStorage.getItem('test-ai-app');
                if (testApp) {
                    updateStatus('integration-status', 'Integrazione testata con successo!', 'success');
                    addTestResult('Integrazione AIdeas', true, 'App di test pronta per importazione');
                } else {
                    updateStatus('integration-status', 'Nessuna app di test trovata', 'info');
                    addTestResult('Integrazione AIdeas', true, 'Test eseguito correttamente');
                }
            } catch (error) {
                updateStatus('integration-status', `Errore: ${error.message}`, 'error');
                addTestResult('Integrazione AIdeas', false, error.message);
            }
        }

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Test Generatore AI caricato');
            addTestResult('Caricamento Test', true, 'Pagina di test caricata correttamente');
        });
    </script>
</body>
</html> 